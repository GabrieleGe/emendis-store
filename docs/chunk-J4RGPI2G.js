import{a as D,b as N}from"./chunk-3Z2JRIK4.js";import{C as O,D as a,F as T,G as x,Ga as M,Ha as B,Ia as A,J as u,Ja as h,L as b,O as d,P as k,Q as E,R as o,S as r,T as Q,U as C,V as _,W as s,aa as c,ba as g,ca as S,fa as y,ga as P,la as w,s as l,t as p,ua as V,v,wa as F,xa as q}from"./chunk-364TS2HA.js";function R(n,i){if(n&1){let t=C();o(0,"button",9),_("click",function(){l(t);let m=s();return p(m.decreaseQuantity())}),c(1,"-"),r()}}function U(n,i){if(n&1){let t=C();o(0,"button",10),_("click",function(){l(t);let m=s();return p(m.increaseQuantity())}),c(1,"+"),r()}}function Y(n,i){if(n&1){let t=C();o(0,"button",11),_("click",function(){l(t);let m=s();return p(m.removeAllItems())}),o(1,"mat-icon"),c(2,"delete"),r()()}}var I=class n{item;isPreview=!1;remove=new v;decreaseQty=new v;increaseQty=new v;decreaseQuantity(){this.decreaseQty.emit(this.item.id)}increaseQuantity(){this.increaseQty.emit(this.item.id)}removeAllItems(){this.remove.emit(this.item.id)}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=x({type:n,selectors:[["app-cart-item"]],inputs:{item:"item",isPreview:"isPreview"},outputs:{remove:"remove",decreaseQty:"decreaseQty",increaseQty:"increaseQty"},decls:17,vars:10,consts:[[1,"cart-item"],[1,"item-info"],["data-testid","item-image",3,"src","alt"],["data-testid","item-title"],[1,"quantity-label"],["mat-button","","data-testid","decrease-button"],["data-testid","quantity",1,"quantity"],["mat-button","","data-testid","increase-button"],["mat-mini-fab","","aria-label","delete all products","data-testid","remove-button",1,"custom-small-button"],["mat-button","","data-testid","decrease-button",3,"click"],["mat-button","","data-testid","increase-button",3,"click"],["mat-mini-fab","","aria-label","delete all products","data-testid","remove-button",1,"custom-small-button",3,"click"]],template:function(t,e){t&1&&(o(0,"li",0)(1,"div",1),Q(2,"img",2),o(3,"div")(4,"h4",3),c(5),r(),o(6,"p"),c(7),y(8,"currency"),r(),o(9,"div")(10,"span",4),c(11,"Quantity: "),r(),u(12,R,2,0,"button",5),o(13,"span",6),c(14),r(),u(15,U,2,0,"button",7),r()()(),u(16,Y,3,0,"button",8),r()),t&2&&(a(2),b("src",e.item.image,O)("alt",e.item.title),a(3),g(e.item.title),a(2),g(P(8,8,e.item.price)),a(5),d(e.isPreview?-1:12),a(2),g(e.item.quantity),a(),d(e.isPreview?-1:15),a(),d(e.isPreview?-1:16))},dependencies:[w,N,D,h,M,A],styles:["[_nghost-%COMP%]   .cart-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:10px 0;border-bottom:1px solid #eee}[_nghost-%COMP%]   .item-info[_ngcontent-%COMP%]{display:flex;align-items:center}[_nghost-%COMP%]   .item-info[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:50px;height:50px;object-fit:contain;margin-right:10px}[_nghost-%COMP%]   .custom-small-button[_ngcontent-%COMP%]{transform:scale(.8)}[_nghost-%COMP%]   .quantity[_ngcontent-%COMP%]{padding:0 4px}"]})};var G=(n,i)=>i.id;function H(n,i){n&1&&(o(0,"p",1),c(1,"Your cart is empty."),r())}function J(n,i){if(n&1){let t=C();o(0,"app-cart-item",8),_("remove",function(m){l(t);let f=s(2);return p(f.removeAllFromCart(m))})("decreaseQty",function(m){l(t);let f=s(2);return p(f.removeOneFromCart(m))})("increaseQty",function(m){l(t);let f=s(2);return p(f.addToCart(m))}),r()}if(n&2){let t=i.$implicit,e=s(2);b("item",t)("isPreview",e.isPreview)}}function K(n,i){if(n&1){let t=C();o(0,"button",9),c(1,"Checkout"),r(),o(2,"button",10),_("click",function(){l(t);let m=s(2);return p(m.clearCart())}),c(3,"Clear Cart"),r()}}function W(n,i){n&1&&(o(0,"a",7),c(1,"Checkout"),r())}function X(n,i){if(n&1&&(o(0,"ul",2),k(1,J,1,2,"app-cart-item",3,G),r(),o(3,"div",4)(4,"p",5),c(5),r(),o(6,"p",6),c(7),y(8,"currency"),r(),u(9,K,4,0)(10,W,2,0,"a",7),r()),n&2){let t=s();a(),E(t.cartItems),a(4),S("Items: ",t.totalCount,""),a(2),S("Total: ",P(8,4,t.totalPrice),""),a(2),d(t.isPreview?-1:9),a(),d(t.isPreview?10:-1)}}var j=class n{constructor(i){this.cartService=i}isPreview=!1;cartItems=[];totalPrice=0;totalCount=0;cartSubscription;ngOnInit(){this.cartSubscription=this.cartService.cartItems$.subscribe(i=>{this.cartItems=i,this.totalPrice=i.reduce((t,e)=>t+e.price*e.quantity,0),this.totalCount=i.reduce((t,e)=>t+e.quantity,0)})}addToCart(i){let t=this.cartItems.find(e=>e.id===i);t&&this.cartService.addToCart(t)}removeOneFromCart(i){this.cartService.removeOneFromCart(i)}removeAllFromCart(i){this.cartService.removeAllFromCart(i)}clearCart(){this.cartService.clearCart()}static \u0275fac=function(t){return new(t||n)(T(q))};static \u0275cmp=x({type:n,selectors:[["app-cart"]],inputs:{isPreview:"isPreview"},decls:3,vars:1,consts:[[1,"cart-container"],[1,"empty-cart"],[1,"cart-items"],[3,"item","isPreview"],[1,"cart-summary"],[1,"items-count"],[1,"total"],["mat-stroked-button","","routerLink","/cart"],[3,"remove","decreaseQty","increaseQty","item","isPreview"],["mat-stroked-button","",1,"checkout-button"],["mat-flat-button","",3,"click"]],template:function(t,e){t&1&&(o(0,"div",0),u(1,H,2,0,"p",1)(2,X,11,6),r()),t&2&&(a(),d(e.cartItems.length===0?1:2))},dependencies:[w,I,h,B,M,F,V],styles:[".cart-container[_ngcontent-%COMP%]{padding:10px}.cart-container[_ngcontent-%COMP%]   .empty-cart[_ngcontent-%COMP%]{text-align:center;color:#888}.cart-container[_ngcontent-%COMP%]   .cart-items[_ngcontent-%COMP%]{list-style:none;padding:0}.cart-container[_ngcontent-%COMP%]   .cart-summary[_ngcontent-%COMP%]{margin-top:20px;text-align:right}.cart-container[_ngcontent-%COMP%]   .cart-summary[_ngcontent-%COMP%]   .total[_ngcontent-%COMP%]{font-weight:700;font-size:1.2em}.cart-container[_ngcontent-%COMP%]   .checkout-button[_ngcontent-%COMP%]{margin-right:8px}"]})};export{j as a};
